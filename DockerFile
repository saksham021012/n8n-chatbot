# Use official n8n image
FROM n8nio/n8n:latest

# Set working directory
WORKDIR /data

# Copy workflow JSON and package.json
COPY workflow.json /data/
COPY package.json /data/

# Install dependencies if needed
RUN npm install

# Expose n8n default port
EXPOSE 5678

# Set environment variable to auto-import workflow
ENV N8N_IMPORT_WORKFLOWS=/data/workflow.json

# Start n8n
CMD ["n8n", "start", "--tunnel"]
